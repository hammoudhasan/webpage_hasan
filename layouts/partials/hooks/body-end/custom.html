<!-- Neural Frontier - Custom JavaScript -->
<script src="/js/neural-frontier.js" defer></script>

<!-- Additional CSS for scroll navbar -->
<style>
.navbar.scroll-down {
  transform: translateY(-100%);
}
.navbar.scroll-up {
  transform: translateY(0);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
}
</style>

<!-- Neural Network Intro Animation -->
<div id="neural-intro" class="neural-intro">
  <canvas id="neural-canvas"></canvas>
  <div class="intro-content">
    <div class="intro-logo">
      <svg class="brain-icon" viewBox="0 0 100 100" fill="none">
        <circle class="brain-circle" cx="50" cy="50" r="45" stroke="url(#neonGrad)" stroke-width="2"/>
        <circle class="brain-dot brain-dot-1" cx="30" cy="35" r="4" fill="#00f0ff"/>
        <circle class="brain-dot brain-dot-2" cx="70" cy="35" r="4" fill="#00f0ff"/>
        <circle class="brain-dot brain-dot-3" cx="50" cy="25" r="4" fill="#bf00ff"/>
        <circle class="brain-dot brain-dot-4" cx="35" cy="55" r="4" fill="#00f0ff"/>
        <circle class="brain-dot brain-dot-5" cx="65" cy="55" r="4" fill="#bf00ff"/>
        <circle class="brain-dot brain-dot-6" cx="50" cy="70" r="4" fill="#00f0ff"/>
        <line class="brain-line" x1="30" y1="35" x2="50" y2="25" stroke="#00f0ff" stroke-width="1.5"/>
        <line class="brain-line" x1="70" y1="35" x2="50" y2="25" stroke="#00f0ff" stroke-width="1.5"/>
        <line class="brain-line" x1="30" y1="35" x2="35" y2="55" stroke="#bf00ff" stroke-width="1.5"/>
        <line class="brain-line" x1="70" y1="35" x2="65" y2="55" stroke="#bf00ff" stroke-width="1.5"/>
        <line class="brain-line" x1="35" y1="55" x2="50" y2="70" stroke="#00f0ff" stroke-width="1.5"/>
        <line class="brain-line" x1="65" y1="55" x2="50" y2="70" stroke="#00f0ff" stroke-width="1.5"/>
        <line class="brain-line" x1="35" y1="55" x2="65" y2="55" stroke="#bf00ff" stroke-width="1.5"/>
        <defs>
          <linearGradient id="neonGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#00f0ff"/>
            <stop offset="100%" stop-color="#bf00ff"/>
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="intro-terminal">
      <div class="terminal-line" data-delay="0">
        <span class="terminal-prompt">λ</span>
        <span class="terminal-text">Initializing neural network...</span>
      </div>
      <div class="terminal-line" data-delay="400">
        <span class="terminal-prompt">λ</span>
        <span class="terminal-text">Loading research modules <span class="highlight">[LLM, Multimodal, Safety]</span></span>
      </div>
      <div class="terminal-line" data-delay="800">
        <span class="terminal-prompt">λ</span>
        <span class="terminal-text">Connecting to <span class="highlight">KAUST AI</span> cluster...</span>
      </div>
      <div class="terminal-line" data-delay="1200">
        <span class="terminal-prompt">λ</span>
        <span class="terminal-text">Model ready. Welcome.</span>
      </div>
    </div>
    <div class="intro-name">HASAN HAMMOUD</div>
    <div class="intro-tagline">AI Researcher • PhD @ KAUST</div>
    <div class="intro-progress">
      <div class="progress-bar"></div>
    </div>
  </div>
</div>

<style>
/* Neural Intro Animation Styles */
.neural-intro {
  position: fixed;
  inset: 0;
  z-index: 99999;
  background: #000000;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.neural-intro.fade-out {
  animation: introFadeOut 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes introFadeOut {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.1); pointer-events: none; }
}

#neural-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

.intro-content {
  position: relative;
  z-index: 2;
  text-align: center;
  padding: 2rem;
}

/* Brain/Neural Logo */
.intro-logo {
  margin-bottom: 2rem;
}

.brain-icon {
  width: 120px;
  height: 120px;
  animation: floatBrain 3s ease-in-out infinite;
}

@keyframes floatBrain {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.brain-circle {
  stroke-dasharray: 283;
  stroke-dashoffset: 283;
  animation: drawCircle 1.5s ease forwards;
}

@keyframes drawCircle {
  to { stroke-dashoffset: 0; }
}

.brain-dot {
  opacity: 0;
  transform-origin: center;
}

.brain-dot-1 { animation: pulseDot 0.3s ease 0.3s forwards, glowPulse 2s ease 1s infinite; }
.brain-dot-2 { animation: pulseDot 0.3s ease 0.4s forwards, glowPulse 2s ease 1.2s infinite; }
.brain-dot-3 { animation: pulseDot 0.3s ease 0.5s forwards, glowPulse 2s ease 1.4s infinite; }
.brain-dot-4 { animation: pulseDot 0.3s ease 0.6s forwards, glowPulse 2s ease 1.1s infinite; }
.brain-dot-5 { animation: pulseDot 0.3s ease 0.7s forwards, glowPulse 2s ease 1.3s infinite; }
.brain-dot-6 { animation: pulseDot 0.3s ease 0.8s forwards, glowPulse 2s ease 1.5s infinite; }

@keyframes pulseDot {
  0% { opacity: 0; transform: scale(0); }
  50% { transform: scale(1.5); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes glowPulse {
  0%, 100% { filter: drop-shadow(0 0 3px currentColor); }
  50% { filter: drop-shadow(0 0 10px currentColor); }
}

.brain-line {
  stroke-dasharray: 50;
  stroke-dashoffset: 50;
  animation: drawLine 0.5s ease forwards;
  filter: drop-shadow(0 0 3px currentColor);
}

.brain-line:nth-child(7) { animation-delay: 0.4s; }
.brain-line:nth-child(8) { animation-delay: 0.5s; }
.brain-line:nth-child(9) { animation-delay: 0.6s; }
.brain-line:nth-child(10) { animation-delay: 0.7s; }
.brain-line:nth-child(11) { animation-delay: 0.8s; }
.brain-line:nth-child(12) { animation-delay: 0.9s; }
.brain-line:nth-child(13) { animation-delay: 1.0s; }

@keyframes drawLine {
  to { stroke-dashoffset: 0; }
}

/* Terminal Text */
.intro-terminal {
  font-family: 'Fira Code', 'SF Mono', monospace;
  font-size: 0.85rem;
  text-align: left;
  max-width: 450px;
  margin: 0 auto 2rem;
  background: rgba(0, 240, 255, 0.03);
  border: 1px solid rgba(0, 240, 255, 0.1);
  border-radius: 8px;
  padding: 1rem 1.5rem;
}

.terminal-line {
  opacity: 0;
  transform: translateY(10px);
  margin-bottom: 0.5rem;
  color: #8892b0;
}

.terminal-line:last-child {
  margin-bottom: 0;
}

.terminal-line.visible {
  animation: terminalReveal 0.4s ease forwards;
}

@keyframes terminalReveal {
  to { opacity: 1; transform: translateY(0); }
}

.terminal-prompt {
  color: #00f0ff;
  margin-right: 0.75rem;
  text-shadow: 0 0 10px rgba(0, 240, 255, 0.5);
}

.terminal-text .highlight {
  color: #bf00ff;
  text-shadow: 0 0 8px rgba(191, 0, 255, 0.4);
}

/* Name Reveal */
.intro-name {
  font-family: 'Orbitron', sans-serif;
  font-size: clamp(1.5rem, 5vw, 3rem);
  font-weight: 700;
  letter-spacing: 0.3em;
  background: linear-gradient(90deg, #00f0ff, #ffffff, #bf00ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  opacity: 0;
  transform: translateY(20px) scale(0.9);
  animation: nameReveal 0.8s ease 1.6s forwards;
  text-shadow: none;
  filter: drop-shadow(0 0 30px rgba(0, 240, 255, 0.5));
}

@keyframes nameReveal {
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.intro-tagline {
  font-family: 'Rajdhani', sans-serif;
  font-size: 1rem;
  color: #8892b0;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  margin-top: 0.5rem;
  opacity: 0;
  animation: fadeUp 0.6s ease 2s forwards;
}

@keyframes fadeUp {
  to { opacity: 1; }
}

/* Progress Bar */
.intro-progress {
  width: 200px;
  height: 2px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  margin: 2rem auto 0;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, #00f0ff, #bf00ff);
  box-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
  animation: progressFill 3s ease-in-out forwards;
}

@keyframes progressFill {
  0% { width: 0; }
  20% { width: 20%; }
  40% { width: 45%; }
  60% { width: 70%; }
  80% { width: 90%; }
  100% { width: 100%; }
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .brain-icon {
    width: 80px;
    height: 80px;
  }
  .intro-terminal {
    font-size: 0.7rem;
    padding: 0.75rem 1rem;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .neural-intro {
    display: none !important;
  }
}
</style>

<script>
(function() {
  // Check if intro was already shown this session
  if (sessionStorage.getItem('introShown')) {
    document.getElementById('neural-intro')?.remove();
    return;
  }

  const intro = document.getElementById('neural-intro');
  const canvas = document.getElementById('neural-canvas');
  const ctx = canvas.getContext('2d');

  // Resize canvas
  function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  // Floating particles and connections
  const particles = [];
  const particleCount = 50;

  for (let i = 0; i < particleCount; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      vx: (Math.random() - 0.5) * 0.5,
      vy: (Math.random() - 0.5) * 0.5,
      size: Math.random() * 2 + 1,
      color: Math.random() > 0.5 ? '#00f0ff' : '#bf00ff'
    });
  }

  function drawParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw connections
    particles.forEach((p, i) => {
      for (let j = i + 1; j < particles.length; j++) {
        const p2 = particles[j];
        const dx = p2.x - p.x;
        const dy = p2.y - p.y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < 150) {
          ctx.beginPath();
          ctx.moveTo(p.x, p.y);
          ctx.lineTo(p2.x, p2.y);
          ctx.strokeStyle = `rgba(0, 240, 255, ${0.15 * (1 - dist / 150)})`;
          ctx.lineWidth = 0.5;
          ctx.stroke();
        }
      }
    });

    // Draw and move particles
    particles.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;

      if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
      if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
      ctx.fillStyle = p.color;
      ctx.globalAlpha = 0.6;
      ctx.fill();
      ctx.globalAlpha = 1;
    });

    if (!intro.classList.contains('fade-out')) {
      requestAnimationFrame(drawParticles);
    }
  }

  drawParticles();

  // Terminal text animation
  const terminalLines = document.querySelectorAll('.terminal-line');
  terminalLines.forEach(line => {
    const delay = parseInt(line.dataset.delay);
    setTimeout(() => {
      line.classList.add('visible');
    }, delay);
  });

  // End intro after ~3.5 seconds
  setTimeout(() => {
    intro.classList.add('fade-out');
    sessionStorage.setItem('introShown', 'true');

    setTimeout(() => {
      intro.remove();
    }, 800);
  }, 3500);
})();
</script>
