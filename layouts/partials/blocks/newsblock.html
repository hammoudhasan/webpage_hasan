{{ $st := .page_type | default "block" }}
<section id="{{ .block.id | default .id | default (replace (replace .block.title " " "-") ":" "") | lower }}" class="home-section wg-{{ .block.type | default "newsblock" }}">
  <div class="container">
    <div class="row">
      <div class="col-12 section-heading">
        <h1>{{ .block.content.title | default "Recent News" | markdownify | emojify }}</h1>
        {{ with .block.content.subtitle }}<p class="section-subtitle">{{ . | markdownify | emojify }}</p>{{ end }}
      </div>
    </div>

    {{ $news_entries := where site.RegularPages "Section" "news" }}
    {{ $news_entries = $news_entries | first 8 }}

    <div class="row">
      <div class="col-12">
        <div class="news-container">
          <div class="news-scroll-container">
            {{ range $news_entries }}
            <article class="news-item">
              <div class="marker-dot"></div>
              <div>
                <time class="news-date" datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2006" }}</time>
                {{ if .Params.linkable }}
                  <h3 class="news-title"><a class="news-link" href="{{ .RelPermalink }}">{{ .Title | markdownify }}</a></h3>
                {{ else }}
                  <h3 class="news-title">{{ .Title | markdownify }}</h3>
                {{ end }}
                <p class="news-summary">
                  {{ with .Params.summary }}{{ . | markdownify | plainify | truncate 160 }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}
                </p>
              </div>
            </article>
            {{ end }}
          </div>
          <div class="news-footer">
            <a href="/news/" class="btn btn-outline-primary">View all updates</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
